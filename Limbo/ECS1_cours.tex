\startproduct Limbo
\project project_Cours

\definepapersize[emc][width=29.7cm,height=21cm]
\setuppapersize[emc][emc]
\setuplayout[backspace=1.5cm,topspace=0.5cm,width=26.7cm,height=19cm,header=0.5cm,footer=0.5cm, headerdistance=0.5cm,footerdistance=0.5cm]

\definehead[domain] [chapter]
\setuphead[domain] [incrementnumber=list]
\setuplist[domain][width=0em,style=bold]  
\setuplist[chapter][width=1.5em]  
\setuplist[section][width=2.5em]                                              
\setuplist[subsection][width=3.5em, margin=2.5em]   
\setuplist[subject][margin=1.5em]
\setupcombinedlist[content][list={domain, chapter,section,subsection}]


%\definereferenceformat[eqref][left=(,right=)]
%\definehighlight[avoid][color=darkgray]

\defineenumeration[definition][left={\somenamedheadnumber{chapter}{current}.},location=serried,width=fit,text=D√©finition,location=serried,counter=property,alternative=left,title=yes,style=normal,list=all,listtext={D√©finition }]
\defineenumeration[theorem][left={\somenamedheadnumber{chapter}{current}.},location=serried,width=fit,text=Th√©or√®me,counter=property,title=yes,style=normal,list=all,listtext={Th√©or√®me }]
\defineenumeration[property][left={\somenamedheadnumber{chapter}{current}.},location=serried,width=fit,title=yes,way=bychapter,style=normal,list=all,text=Propri√©t√©,listtext={Propri√©t√© }]
\defineenumeration[corollary][left={\somenamedheadnumber{chapter}{current}.},location=serried,width=fit,text=Corollaire,counter=property,title=yes,style=normal,list=all,listtext={Corollaire }]
\defineenumeration[notation][left={\somenamedheadnumber{chapter}{current}.},location=serried,width=fit,text=Notation,counter=property,title=yes,style=normal,list=all,listtext={Notation }]
\defineenumeration[craft][left={\somenamedheadnumber{chapter}{current}.},location=serried,width=fit,text=M√©thode,counter=property,title=yes,style=normal,list=all,listtext={M√©thode }]

\catcode`ùïÇ=\active
\defùïÇ{‚Ñù}

%\defineenumeration[iproperty][hang=fit,left={\somenamedheadnumber{chapter}{current}.},location=serried,width=fit,title=yes,style=normal,list=all,text=Propri√©t√©,listtext={Propri√©t√© }]

%\ctxlua{lxml.load("calcul", 'xml/Limbo_M√©thodes_de_calcul.xml')}%
%\ctxlua{L.insertSubsection("calcul", 'section[attribute("t")=="Sommes"]')}%
%\meaning\xmlprocessfile
%\meaning\doxmlprocess
%\ctxlua{L.test()}%

\def\applySettups#1{
\startxmlsetups xml:#1
\xmlsetsetup{#1}{*}{-}
\xmlsetsetup{#1}{root}{xml:#1:flush}%
% sectioning
\xmlsetsetup{#1}{part|chapter|section|subsection|subsubsection|concept}{xml:#1:group}
%\xmlsetsetup{#1}{part|chapter|section|subsection|subsubsection|concept}{xml:#1:group}%
% grouping 
\xmlsetsetup{#1}{group}{xml:#1:group}
\xmlsetsetup{#1}{context}{xml:#1:context}
%\xmlsetsetup{suites}{combination}{xml:combination}
%\xmlsetsetup{maths}{combination/property}{xml:combination/statement}
% statements (primary objects)
\xmlsetsetup{#1}{corollary|definition|lemma|notation|property|theorem|}{xml:#1:statement} 
% best practice (secondary info)
\xmlsetsetup{#1}{craft|uses|item}{xml:#1:*}
% illustration
%\xmlsetsetup{#1}{figure|example}{xml:#1:*} 
% text (tertiary info)
%\xmlsetsetup{#1}{remark|remarks|text}{xml:#1:*} 

% exercises
%\xmlsetsetup{#1}{exercise}{xml:#1:*}
% proofs
%\xmlsetsetup{#1}{proof}{xml:#1:*}
\stopxmlsetups 
\xmlregistersetup{xml:#1} 


\startxmlsetups xml:#1:flush
\xmlflush{##1}%
\stopxmlsetups

\startxmlsetups xml:#1:group
\ctxlua{L.processGroupCours("##1")}%
\stopxmlsetups

\startxmlsetups xml:#1:context
\ctxlua{L.processRawContent("##1")}%
\stopxmlsetups

\startxmlsetups xml:#1:statement
\ctxlua{L.processStatementCours("##1")}%
%\placeleftfigure{}{\useMPgraphic{Frame}}%
\stopxmlsetups

\startxmlsetups xml:#1:craft
\ctxlua{L.processStatementCours("##1")}%
\stopxmlsetups


\startxmlsetups xml:#1:combination
\ctxlua{L.processCombination("##1")}%
\stopxmlsetups
\startxmlsetups xml:#1:example
\ctxlua{L.processExample("##1")}%
\stopxmlsetups




% remarks
\startxmlsetups xml:#1:remark
\ctxlua{L.processRemark("##1")}%
\stopxmlsetups

\startxmlsetups xml:#1:remarks 
{\tenpoint\startitemize[packed,intext,joinedup,2,nowhite,after]%
\xmlflush{##1}%
\stopitemize}%
\stopxmlsetups

\startxmlsetups xml:#1:remarks:remark
\item\ctxlua{L.processRawContent("##1")}%
\stopxmlsetups

% texts
\startxmlsetups xml:#1:text
\ctxlua{L.processRawContent("##1")}%
\stopxmlsetups

\startxmlsetups xml:#1:uses
{\tenpoint
\startitemize[packed,intext,joinedup,4,nowhite,after]
\xmlflush{##1}%
\stopitemize}
\stopxmlsetups


\startxmlsetups xml:#1:item
\ctxlua{L.processContent("##1","\\item")}%
\stopxmlsetups
}

\def\pn{\medskip}

% defines unnumbered domain
% see http://wiki.contextgarden.net/Titles#Unnumbered_titles_in_table_of_contents
% see http://wiki.contextgarden.net/Table_of_Contents#Including_unnumbered_heads_in_the_ToC
\definehead     [domain] [chapter]
\setuphead      [domain] [incrementnumber=list]
\setuplist[domain][width=0em,style=bold]  
\setuplist[chapter][width=1.5em]  
\setuplist[section][width=2.5em]                                              
\setuplist[subsection][width=3.5em, margin=2.5em]   
\setuplist[subject][margin=1.5em]
\setupcombinedlist[content][list={domain, chapter,section,subsection}]
\applySettups{suites}
\applySettups{sommes}
\applySettups{logique}
\applySettups{ensembles}
\applySettups{syst√®mes}
\applySettups{matrices}
\applySettups{ev}
\applySettups{polynomes}
\applySettups{probabilit√©s}
\applySettups{VAR}
\applySettups{maths}


\iffalse

% Fondements th√©oriques
% alphabet grec
\startdomain[title=Bases th√©oriques]
% A1.1 (propositions)
\xmlprocessfile{maths}{xml/ECS_Logique.xml}{}
% A1.2 (suites)
\xmlprocessfile{maths}{xml/ECS_sommes_produits_r√©currences.xml}{}
% A1.3 (fonctions)
\xmlprocessfile{maths}{xml/ECS_Ensembles_et_applications.xml}{}
% A6.4 combinatoire

% A4.1 ‚Ñù 
\stopdomain

\startdomain [title=Analyse]
% Analyse (suites) 
%A4.2 exemples suites r√©elles
\xmlprocessfile{maths}{xml/ECS_Suites_fondamentales.xml}{}
%A4.3 suites r√©elles 
\xmlprocessfile{maths}{xml/ECS_Suites.xml}{}
%B2.1 etude asymptotique
%B2.3 S√©ries

% Analyse (fonctions)
% A5.1 limites et continuit√© fonctions r√©elles
% A5.2 etude globale sur un intervalle
\xmlprocessfile{maths}{xml/ECS_Continuit√©_limites.xml}{}
\xmlprocessfile{maths}{xml/Limbo_Continuit√©.xml}{}
% A5.3 d√©rivation
% B2.8 extrema
% B2.9 fonctions convexes
\xmlprocessfile{maths}{xml/Limbo_D√©rivation.xml}{}
% B2.5 d√©riv√©es successives
% A5.4 int√©gration sur un segment + sommes de Riemann
\xmlprocessfile{maths}{xml/ECS_D√©riv√©es_et_primitives.xml}{}
\xmlprocessfile{maths}{xml/Limbo_Int√©gration.xml}{}
%B2.6 Formule de Taylor
%B2.2 comparaison des fonctions
%B2.7 d√©veloppements limit√©s
%B2.4 integrales generalis√©es

\xmlprocessfile{maths}{xml/Limbo_D√©veloppements_limit√©s.xml}{}


\stopdomain 
\startdomain[title=Alg√®bre] 

% Alg√®bre (non-lin√©aire)
%A2.1
\xmlprocessfile{maths}{xml/Limbo_Nombres_complexes.xml}{}
%A2.2
\xmlprocessfile{maths}{xml/ECS_Polyn√¥mes.xml}{}

% Alg√®bre (lin√©aire)
%A3.2
\xmlprocessfile{maths}{xml/ECS_Syst√®mes.xml}{}
%A3.1
\xmlprocessfile{maths}{xml/ECS_Matrices.xml}{}
%A3.3
\xmlprocessfile{maths}{xml/ECS_Espaces_vectoriels.xml}{}
%B1.1 Espaces de dim finie
%B1.2 sommes directes suppl√©mentaires
%B1.3 Applications lin√©aires 



\stopdomain
\startdomain[title=Probabilit√©s]

% Probabilit√©s
% A6.1 Univers fini : Exp√©riences al√©atoires, √©v√©nements, probabilit√©, probabilit√© conditionnelles, ind√©pendance
\xmlprocessfile{maths}{xml/ECS_Probabilit√©s.xml}{}
% A6.2 VAR r√©elle (finie)
\xmlprocessfile{maths}{xml/ECS_Variables_al√©atoires.xml}{}
% A6.3 loi usuelles


%B3.1 espace probabilis√© quelconque
%B3.2 VAR r√©elles
%B3.3 VAR discretes
%B3.4 loi discretes usuelles
%B3.5 VAR √† densit√©
%B3.6 loi √† densit√© usuelles
%B3.7 convergence et approximation


\stopdomain
























\fi



%\setuphead[after={\blank[samepage]}]
%\setuphead[section][after=]
%\setuphead[chapter][after=]
\definehead[chapter][page=no,before=,after=]
\definehead[section][page=no,before=,after=]
%\setuphead[chapter][aftersection=, after=, commandafter=]
\def\Concept#1{}%

\starttext
\begingroup\eightpoint\startcolumns[n=2,rule=on]
\enabletrackers[lxml.loading,lxml.setups]
\xmlprocessfile{cours}{xml/ECS_poly.xml}{}
%\xmlprocessfile{maths}{xml/ECS_Suites_fondamentales.xml}{}
%\xmlprocessfile{maths}{xml/ECS_Logique.xml}{}
%\xmlprocessfile{maths}{xml/ECS_sommes_produits_r√©currences.xml}{}

%\xmlprocessfile{maths}{xml/ECS_Suites.xml}{}
%\xmlprocessfile{maths}{xml/ECS_Ensembles_et_applications.xml}{}

%\xmlprocessfile{maths}{xml/ECS_Continuit√©_limites.xml}{}
%\xmlprocessfile{maths}{xml/Limbo_Continuit√©.xml}{}


%\xmlprocessfile{maths}{xml/ECS_Probabilit√©s.xml}{}



\stopcolumns\endgroup
\stoptext


%\xmlprocessfile{maths}{xml/Limbo_Structures_alg√®briques.xml}{}

\starttext
\chapter{Fiches}
\completeRecords
\stopcolumns
\stoptext

\starttext
\completecontent[criterium=all]
\stoptext

\iffalse
\starttext
\completeindex
\stoptext
\fi
\stopproduct
